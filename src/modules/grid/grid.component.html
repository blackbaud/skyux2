<div class="sky-grid">
  <div class="sky-grid-table-container" [style.height.px]="height" [style.width.px]="width">
    <table
      class="sky-grid-table"
      [ngClass]="{ 'sky-grid-fit': fit !== 'scroll', 'sky-grid-has-toolbar': hasToolbar }">
      <thead>
        <tr dragula="sky-grid-heading">
          <th
            scope="col"
            class="sky-grid-heading"
            *ngFor="let column of displayedColumns; let last = last"
            [style.width.px]="last ? null : column.width"
            [attr.sky-cmp-id]="column.id || column.field"
            [ngClass]="{ 'sky-grid-header-locked': column.locked }"
            (click)="sortByColumn(column)">
            {{column.heading}}
            <i
              class="fa sky-grid-heading-sort"
              [ngStyle]="{'visibility: hidden': (getSortDirection(column.field) | async)}"
              [ngClass]="{ 'fa-caret-up': (getSortDirection(column.field) | async) === 'asc', 'fa-caret-down': (getSortDirection(column.field) | async) === 'desc' }"
            >
            </i>
          </th>
        </tr>
      </thead>
      <tbody class="sky-grid-tbody">
        <ng-container *ngFor="let item of items">
          <tr
            class="sky-grid-row"
            [ngClass]="{'sky-grid-row-open': canRenderRowDetails() && item.detailsOpen}"
            [attr.sky-cmp-id]="item.id">
            <td
              class="sky-grid-cell"
              *ngFor="let column of displayedColumns; let last = last; let i = index">
              <sky-grid-cell [ngClass]="{'sky-grid-row-last-column': last}"
                [template]="column.template || defaultCellTemplate"
                [fieldSelector]="column.field"
                [item]="item"
                [columnId]="column.id"
                [attr.sky-cmp-id]="column.id || column.field"
                [style.width.px]="last ? null : column.width">
              </sky-grid-cell>
              <sky-chevron
                class="sky-pull-right sky-grid-row-details-icon"
                *ngIf="last && canRenderRowDetails()"
                [direction]="isExpanded ? 'up' : 'down'"
                (directionChange)="chevronDirectionChange($event, item)">
              </sky-chevron>
            </td>
          </tr>
          <tr class="sky-grid-row"
              *ngIf="canRenderRowDetails() && item.detailsOpen">
            <td [colSpan]="displayedColumns.length"
                class="sky-grid-row-details">
              <sky-grid-details
                [template]="detailsTemplate"
                [item]="item">
              </sky-grid-details>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>

<ng-template #defaultCellTemplate let-row="row" let-value="value">{{value}}</ng-template>
