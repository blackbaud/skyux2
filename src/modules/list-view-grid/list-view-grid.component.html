<div *ngIf="active | async" [style.height.px]="height | async" [style.width.px]="width | async">
  <table [ngClass]="{ fit: fit !== 'scroll' }">
    <thead>
      <tr dragula="heading">
        <th class="heading" *ngFor="let column of columns | async; let last = last" (click)="sortByColumn(column)" [style.width.px]="last ? null : column.width" [attr.cmp-id]="column.id || column.field" [ngClass]="{ locked: column.locked }">
          {{column.heading}}
        </th>
      </tr>
    </thead>
    <tbody>
      <tr class="sky-list-view-grid-row" *ngFor="let item of items | async" [attr.cmp-id]="item.id">
        <td *ngFor="let column of columns | async; let last = last; let i = index">
          <sky-list-view-grid-cell [template]="column.template || defaultCellTemplate" [fieldSelector]="column.field" [item]="item" [columnId]="column.id" [attr.cmp-id]="column.id || column.field" [style.width.px]="last ? null : column.width"></sky-list-view-grid-cell>
        </td>
      </tr>
    </tbody>
  </table>
  <sky-wait [isWaiting]="loading | async"></sky-wait>
</div>

<template #defaultCellTemplate let-row="row" let-value="value">{{value}}</template>
<template #selectTemplate let-itemId="item.id" let-selected="isSelected"><sky-checkbox id="{{itemId}}" class="select-checkbox" [checked]="selected" (change)="toggleSelected($event, itemId)"></sky-checkbox></template>
<template #chooseColumnsTemplate>
  <button (click)="openColumnSelector()" title="Choose Columns">
    <span class="fa fa-lg fa-columns"></span>
  </button>
</template>
